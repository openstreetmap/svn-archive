<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="osmarender.xsl"?>

<!-- This file should be used with Osmarender 4 -->
<!-- This file implements a sub-set of the items described at http://wiki.openstreetmap.org/index.php/Map_Features -->

<!-- A scale of 0.1 will make fat roads on a small map, a scale of 5 will draw very thin roads on a large scale map -->
<!-- minimumMapWidth/Height is in kilometres -->
<!-- Set javaScript="no" if you want an svg file that contains no javascript.  This is so that you can upload it to Wikipedia etc -->
<rules
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:svg="http://www.w3.org/2000/svg"
    data="data.osm"
    svgBaseProfile="full"
    scale="1"
    symbolScale="1"
    minimumMapWidth="1"
    minimumMapHeight="1"
    withOSMLayers="yes"
    withUntaggedSegments="no"
    showScale="no"
    showGrid="no"
    showBorder="no"
    showLicense="no"
    interactive="no">

    <!--bounds_mkr1-->
    <!--bounds_mkr2-->

    <!-- For debugging this rule draws a one pixel wide trace of *all* segments.  This enables segments that have no
            tags to be identified. Comment it out to hide the debug trace. -->
    <!--<rule e="segment" k="~" v="~">
        <line class='debug'/>
    </rule>-->

    <!-- Select all nodes, waysegments and ways (unless they have an osmarender:render=no tag) -->
    <!-- If you really want to render segments then you will need to add segment to the element list, but please don't - tag the ways instead. -->
    <rule e="node|way" k="osmarender:render" v="~|yes">

        <!-- Draw land areas first -->
        <rule e="way" k="natural" v="land">
            <area class='natural-land' />
        </rule>


		<!-- Landuse -->
		<!-- at zoom 12 render all landuse in the same colour so it doesn't look too psychadelic -->
		<rule e="way" k="landuse" v="residential|retail|industrial|commercial|cemetery">
		    <area class='landuse-all'/>
		</rule>


        <!-- Natural features -->
        <rule e="way" k="natural" v="coastline">
            <area class='natural-coastline'/>
        </rule>
        <rule e="way" k="landuse|natural" v="forest|wood">
            <area class='landuse-wood'/>
        </rule>
        <rule e="way" k="landuse" v="field|village_green|meadow">
            <area class='landuse-field'/>
        </rule>
        <rule e="way" k="amenity" v="school|college|university">
            <area class='landuse-all'/>
        </rule>
        <rule e="way" k="leisure" v="park|playing_fields|garden|pitch|golf_course|common|green">
            <area class='leisure-park'/>
        </rule>
        <rule e="way" k="leisure" v="stadium|sports_centre">
            <area class='leisure-stadium'/>
        </rule>
        <rule e="way" k="leisure" v="track">
            <area class='leisure-track'/>
        </rule>


		<!-- Airports and runways -->
		<rule e="way" k="aeroway" v="apron">
			<area class='aeroway-apron'/>			
		</rule>
		<rule e="way" k="landuse" v="runway">
			<rule e="way" k="use_status" v="~">
				<area class='landuse-runway' />
			</rule>
			<rule e="way" k="use_status" v="disused">
				<area class='landuse-runway-disused' />
			</rule>
			<rule e="way" k="use_status" v="dismantled">
				<area class='landuse-runway-dismantled' />
			</rule>
		</rule>


		<!-- Raceways and racetracks -->
		<rule e="way" k="landuse" v="raceway">
			<rule e="way" k="use_status" v="~">
				<area class='landuse-raceway' />
			</rule>
			<rule e="way" k="use_status" v="disused">
				<area class='landuse-raceway-disused' />
			</rule>
			<rule e="way" k="use_status" v="dismantled">
				<area class='landuse-raceway-dismantled' />
			</rule>
		</rule>

        <!-- Man-made areas -->
        <rule e="way" k="sport" v="*">
            <area class='sport'/>
        </rule>
        <rule e="way" k="amenity" v="parking">
            <area class='amenity-parking'/>
        </rule>
        <rule e="way" k="tourism" v="attraction">
            <area class='tourism-attraction'/>
        </rule>
        <rule e="way" k="aeroway" v="terminal">
            <area class='building-block'/>
        </rule>
        <rule e="way" k="building" v="*">
            <area class='building-block'/>
        </rule>


        <!-- Waterways, lakes and ponds -->
        <rule e="way" k="waterway" v="riverbank">
            <area class='waterway-riverbank'/>
        </rule>
        <rule e="segment|way" k="waterway" v="river">
            <line class='waterway-river-core'/>
        </rule>
        <rule e="segment|way" k="waterway" v="canal">
            <line class='waterway-canal-core'/>
        </rule>
        <rule e="way" k="waterway" v="dock">
            <area class='natural-water' />
        </rule>
        <rule e="way" k="natural" v="water|pond|lake">
            <area class='natural-water' />
        </rule>
        <rule e="way" k="landuse" v="reservoir">
            <area class='natural-water' />
        </rule>
        <rule e="way" k="landuse" v="basin">
            <area class='natural-water' />
        </rule>


		<!-- Non-physical boundaries -->
		<rule e="way" k="boundary" v="national">
			<line class="boundary boundary-administrative-state-casing" />
			<line class="boundary boundary-administrative-state-core" />
		</rule>

		<rule e="way" k="boundary" v="administrative">
			<rule e="way" k="left:country|right:country" v="*" >
				<line class="boundary boundary-administrative-state-casing" />
				<line class="boundary boundary-administrative-state-core" />
			</rule>	
			<rule e="way" k="border_type" v="state">
				<line class="boundary boundary-administrative-state-casing" />
				<line class="boundary boundary-administrative-state-core" />
			</rule>	
		</rule>

        <!-- Paths in tunnels -->
        <rule e="segment|way" k="tunnel" v="yes|true">
            <rule e="segment|way" k="highway" v="footway|steps|cycleway|bridleway|byway">
                <tunnel width="0" class='highway-tunnel-narrow' />
            </rule>
        </rule>

        <!-- Paths not in tunnels -->
        <rule e="segment|way" k="tunnel" v="~|no">
            <rule e="segment|way" k="highway" v="footway|steps">
                <line class='highway-core highway-footway' />
            </rule>
            <rule e="segment|way" k="highway" v="steps">
                <line class='highway-core highway-steps' />
            </rule>
            <rule e="segment|way" k="highway" v="cycleway">
                <line class='highway-core highway-cycleway' />
            </rule>
            <rule e="segment|way" k="highway" v="bridleway">
                <line class='highway-core highway-bridleway' />
            </rule>
            <rule e="way" k="highway" v="byway">
                <line class='highway-core highway-byway' />
            </rule>
        </rule>


        <!-- Highway cores (not in tunnel) -->
        <rule e="segment|way" k="tunnel" v="~|false|no">
            <addclass e="segment|way" k="bridge" v="yes|true" class="round">
				<rule e="segment|way" k="highway" v="raceway">
					<rule e="way" k="use_status" v="~">
						<line class='highway-raceway-core' />
					</rule>
					<rule e="way" k="use_status" v="disused">
						<line class='highway-raceway-core-disused' />
					</rule>
					<rule e="way" k="use_status" v="dismantled">
						<line class='highway-raceway-core-dismantled' />
					</rule>
				</rule>
                <rule e="segment|way" k="highway" v="secondary">
                    <line class='highway-core highway-secondary-core' />
                </rule>
                <rule e="segment|way" k="highway" v="primary|primary_link">
                    <line class='highway-core highway-primary-core' />
                </rule>
                <rule e="segment|way" k="highway" v="trunk|trunk_link">
                    <line class='highway-core highway-trunk-core' />
                </rule>
                <rule e="segment|way" k="highway" v="motorway_link">
                    <line class='highway-core highway-motorway-link-core' />
                </rule>
                <rule e="segment|way" k="highway" v="motorway">
                    <line class='highway-core highway-motorway-core' />
                </rule>
            </addclass>
        </rule>

        <!-- Highway cores in tunnels -->
        <rule e="segment|way" k="tunnel" v="true|yes">
            <rule e="segment|way" k="highway" v="service">
                <tunnel width="1" class='highway-core highway-service-core' />
            </rule>
            <rule e="segment|way" k="highway" v="secondary">
                <tunnel width="3" class='highway-core highway-secondary-core' />
            </rule>
            <rule e="segment|way" k="highway" v="primary|primary_link">
                <tunnel width="3" class='highway-core highway-primary-core' />
            </rule>
            <rule e="segment|way" k="highway" v="trunk|trunk_link">
                <tunnel width="4" class='highway-core highway-trunk-core' />
            </rule>
            <rule e="segment|way" k="highway" v="motorway|motorway_link">
                <tunnel width="4" class='highway-core highway-motorway-core' />
            </rule>
        </rule>

        <rule e="node" k="highway" v="mini_roundabout">
            <circle r="0.8px" class="mini-roundabout-core"/>
            <circle r="0.2px" class="mini-roundabout-dot"/>
        </rule>

        <!-- highway motorway-junctions -->
        <rule e="node" k="highway" v="motorway_junction">
          <circle r="7" class="highway-motorway-junction" />
          <text k="name" class='highway-motorway-junction-caption' dy='-2px' />
          <text k="ref" class='highway-motorway-junction-caption' dy='+5px' />
        </rule>


        <!-- Railway lines -->
        <!-- not in tunnel -->
        <rule e="segment|way" k="tunnel" v="~|no|false">
            <rule e="segment|way" k="railway" v="rail">
                <line class='railway-rail' />
            </rule>
            <rule e="segment|way" k="railway" v="light_rail|tram">
                <line class='railway-light-rail' />
            </rule>
            <rule e="segment|way" k="railway" v="subway">
                <line class='railway-subway-rail' />
            </rule>
            <rule e="segment|way" k="railway" v="preserved">
                <line class='railway-preserved' />
            </rule>
        </rule>

        <!-- in tunnel -->
        <rule e="segment|way" k="tunnel" v="true|yes">
            <rule e="segment|way" k="railway" v="rail">
                <tunnel width="1" class='railway-rail' />
            </rule>
            <rule e="segment|way" k="railway" v="light_rail|subway|tram">
                <tunnel width="0" class='railway-tunnel-narrow' />
            </rule>
            <rule e="segment|way" k="railway" v="preserved">
                <tunnel width="1" class='railway-preserved' />
            </rule>
        </rule>


        <!-- Airfields and airports -->
        <rule e="segment|way" k="aeroway" v="runway">
            <line class='aeroway-runway-core'/>
        </rule>
        <rule e="segment|way" k="aeroway" v="taxiway">
            <line class='aeroway-taxiway-core'/>
        </rule>
        <rule e="node" k="aeroway" v="airport">
            <symbol xlink:href="#airport" width='40px' height='40px' transform='translate(-20,-20)' />
        </rule>


        <!-- Non-pysical routes -->
        <rule e="segment|way" k="route" v="ferry">
            <line class='route-ferry' />
        </rule>

        <!-- Place names  -->
        <!-- z12 and below have only limited names 
        <rule e="node" k="place" v="continent">
            <text k="name" class='continent-caption' />
        </rule>
        <rule e="node" k="place" v="country">
            <text k="name" class='country-caption' />
        </rule>
        <rule e="node" k="place" v="state">
            <text k="name" class='state-caption' />
        </rule>
        <rule e="node" k="place" v="region">
            <text k="name" class='region-caption' />
        </rule>
        -->
        <rule k="osmarender:renderName" v="~|yes">
			<rule e="node" k="place" v="county">
				<text k="name" class='county-caption' />
			</rule>
			<rule e="node" k="place" v="city">
				<text k="name" class='city-caption' />
			</rule>
			<rule e="node" k="place" v="town">
				<text k="name" class='town-caption' />
			</rule>
        </rule>

	</rule> <!-- k="osmarender:render" v="~|yes" -->


    <!-- SVG Definitions - markers, symbols etc go here -->
    <defs>

        <style id="styles" type="text/css" xmlns="http://www.w3.org/2000/svg">
            .debug {
                stroke-width: 0.1px;
                stroke-linecap: round;
                stroke: gray;
                /* marker-end: url(#segment-direction); */
            }

            .error {
                stroke-width: 2px;
                stroke-linecap: round;
                stroke: red;
            }

            .highway-core {
                stroke-linecap: butt;
                stroke-linejoin: round;
                fill: none;
            }

            .highway-motorway-junction {
            fill: yellow;
            stroke: #4D5D73;
            stroke-width: 3px;
            }
            
            .highway-motorway-junction-caption {
            fill: black;
            stroke: blue;
            stroke-width: 0.2px;
            font-family: "DejaVu Sans",sans-serif;
            font-size: 10px;
            font-weight: bold;
            display: none;
            }
            
	     /* Highways - street specific style */

            .highway-motorway-core {
                stroke-width: 66px;
                stroke: #809BC0;
            }

            .highway-motorway-link-core {
                stroke-width: 50px;
                stroke: #809BC0;
            }

            .highway-trunk-core {
                stroke-width: 36px;
                stroke: #7fc97f;
            }

            .highway-primary-core {
                stroke-width: 14px;
                stroke: #e46d71;
            }

            .highway-secondary-core {
                stroke-width: 12px;
                stroke: #FDBF6F;
            }

            .highway-service-core {
                stroke-width: 0.4px;
                stroke: #ffffff;
            }

            .highway-bridleway {
                stroke-width: 1px;
                stroke: #70b971;
            }

            .highway-byway {
                stroke-width: 1px;
                stroke: #ef7771;
            }

            .highway-cycleway {
                stroke-width: 1px;
                stroke: #008102;
            }

            .highway-footway {
                stroke-width: 0.5px;
                stroke: #d79331;
            }

            .highway-steps {
                stroke-width: 0.5px;
                stroke: #707070;
                stroke-dasharray: 0.1px, 0.3px;
            }

            .highway-tunnel-narrow {
                stroke-width: 0.1px;
                stroke-dasharray: 0.2,0.2;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #000000;
                fill: none;
            }

            .round {
                stroke-linecap: round;
            }


            /* Mini roundabouts */
            .mini-roundabout-core {
                stroke: #ffffff;
                fill: #ffffff;
            }

            .mini-roundabout-dot {
                stroke: none;
                fill: #222222;
            }


            /* Aeroways */
            .aeroway-apron {
                stroke-width: 0.3px;
                stroke: none;
                fill: #f0f0f0;
            }

            .aeroway-taxiway-core {
                stroke-width: 2px;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #d4dcbd;
                fill: none;
            }

            .aeroway-runway-core {
                stroke-width: 5px;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #d4dcbd;
                fill: none;
            }

            /* Waterways */
            .waterway-riverbank {
                fill: #b5d6f1;
                stroke: #aaaaaa;
                stroke-width: 0px;
            }

            .waterway-river-core {
                stroke-width: 10px;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #b5d6f1;
                fill: none;
            }

            .waterway-canal-core {
                stroke-width: 1px;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #b5d6f1;
                fill: none;
            }

            .railway-rail {
                stroke-width: 80px;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #666666;
                fill: none;
            }

            .railway-preserved {
                stroke-width: 8px;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #666666;
                fill: none;
            }

            .railway-light-rail {
                stroke-width: 2px;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #666666;
                fill: none;
            }

            .railway-tunnel-narrow {
                stroke-width: 1px;
                stroke-dasharray: 1,2;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #000000;
                fill: none;
            }

            .railway-subway-rail {
                stroke-width: 2px;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #666666;
                fill: none;
                stroke-dasharray: 3px, 1px;
                stroke-dashoffset: 0;
                stroke-opacity: 1;
            }

            /* Ferry */
            .route-ferry {
                stroke-width: 2px;
                stroke-dasharray: 3,2;
                stroke-linecap: butt;
                stroke-linejoin: round;
                stroke: #777777;
                fill: none;
            }


            /* Place names */
            .continent-caption {
                fill: black;
                stroke: white;
                stroke-width: 0.6px;
                font-family: "DejaVu Sans",sans-serif;
                font-size: 200px;
                font-weight: bold;
                text-anchor: middle;
            }

            .country-caption {
                fill: black;
                stroke: white;
                stroke-width: 0.5px;
                font-family: "DejaVu Sans",sans-serif;
                font-size: 180px;
                font-weight: bold;
                text-anchor: middle;
            }

            .state-caption {
                fill: black;
                stroke: white;
                stroke-width: 0.5px;
                font-family: "DejaVu Sans",sans-serif;
                font-size: 160px;
                font-weight: bold;
                text-anchor: middle;
            }

            .region-caption {
                fill: black;
                stroke: white;
                stroke-width: 0.4px;
                font-family: "DejaVu Sans",sans-serif;
                font-size: 140px;
                font-weight: bold;
                text-anchor: middle;
            }

            .county-caption {
                fill: black;
                stroke: white;
                stroke-width: 0.4px;
                font-family: "DejaVu Sans",sans-serif;
                font-size: 120px;
                font-weight: bold;
                text-anchor: middle;
            }

            .city-caption {
                fill: black;
                stroke: none;
                stroke-width: 0.4px;
                font-family: "DejaVu Sans",sans-serif;
                font-size: 500px;
                font-weight: bold;
                text-anchor: middle;
            }

            .town-caption {
                fill: black;
                stroke: none;
                font-family: "DejaVu Sans",sans-serif;
                font-size: 200px;
                opacity: 0.7;
                font-weight: bold;
                text-anchor: middle;
            }

            /* Natural */
            .natural-water {
                fill: #b5d6f1;
                stroke: #aaaaaa;
                stroke-width: 0px;
            }

            .natural-coastline {
                fill: #b5d6f1;
                stroke: #b5d6f1;
                stroke-width: 1.5px;
            }

            .natural-land {
                fill: #ffffff;
                stroke: #e0e0e0;
                stroke-width: 0.1px;
            }


            /* Landuse */
            .landuse-all {
                stroke: none;
                fill: #f0f0f0;
            }

            .landuse-wood {
                fill: #72bf81;
                stroke: #6fc18e;
                stroke-width: 0.2px;
            }

            .landuse-field {
                fill: #bde3cb;
                stroke: #6fc13d;
                stroke-width: 0.2px;
            }

			.landuse-runway {
			  stroke-width: 0.3px;
			  stroke: #808080;
			  fill: #d4dcbd;
			  }

			.landuse-runway-disused {
			  stroke-width: 0.3px;
			  stroke: #808080;
			  fill: #d4dcbd;
			  stroke-dasharray: 1px, 1px;
			  }

			.landuse-runway-dismantled {
			  stroke-width: 0.3px;
			  stroke: #808080;
			  fill: #fcffef;
			  stroke-dasharray: 0.3px, 1.7px;
			  opacity: 0.5;
			  }


            /* Leisure */
            .leisure-park {
                fill: #c7f1a3;
                stroke: #6fc18e;
                stroke-width: 0.2px;
            }

            .leisure-stadium {
                fill: #bde3cb;
                stroke: #6fc18e;
                stroke-width: 0.2px;
            }

            .leisure-track {
                fill: #bde3cb;
                stroke: #6fc18e;
                stroke-width: 0.2px;
            }

            .sport {
                fill: #bde3cb;
                stroke: #6fc18e;
                stroke-width: 0.2px;
            }

            .amenity-parking {
                fill: #f7efb7;
                stroke: #e9dd72;
                stroke-width: 0.2px;
            }



			/* Non-physical boundaries */
            .boundary {
                stroke-linecap: butt;
                stroke-linejoin: round;
                fill: none;
            }

	    .boundary-administrative-state-casing {
		stroke-width: 180px; 
		stroke: #ffff00;
		opacity: 0.5;
	    }

	    .boundary-administrative-state-core {
		stroke-width: 100px; 
		stroke: #f9574b;
		stroke-dasharray: 80, 16, 16, 16;
	    }



			/* Racetracks */
			.highway-raceway-core {
			  stroke-width: 1.5px; 
			  stroke-linecap: butt; 
			  stroke-linejoin: round; 
			  fill: none;
			  stroke: #f0f0f0;
			  }

			.highway-raceway-core-disused {
			  stroke-width: 1.5px; 
			  stroke-linecap: butt; 
			  stroke-linejoin: round; 
			  fill: none;
			  stroke-dasharray: 1px, 1px;
			  stroke: #f7f7f7;
			  }

			.highway-raceway-core-dismantled {
			  stroke-width: 1.5px; 
			  stroke-linecap: butt; 
			  stroke-linejoin: round; 
			  fill: none;
			  stroke: #fbfbfb;
			  stroke-dasharray: 0.3px, 1.7px;
			  opacity: 0.5;
			  }
			  
			.landuse-raceway {
			  stroke-width: 0.3px; 
			  stroke-linecap: butt; 
			  stroke-linejoin: round; 
			  fill: #f0f0f0;
			  stroke: #101010;
			  }

			.landuse-raceway-disused {
			  stroke-width: 0.3px; 
			  stroke-linecap: butt; 
			  stroke-linejoin: round; 
			  fill: #f7f7f7;
			  stroke: #808080;
			  stroke-dasharray: 1px, 1px;
			  }

			.landuse-raceway-dismantled {
			  stroke-width: 0.3px; 
			  stroke-linecap: butt; 
			  stroke-linejoin: round; 
			  fill: #fbfbfb;
			  stroke: #808080;
			  stroke-dasharray: 0.3px, 1.7px;
			  opacity: 0.5;
			  }

            /* Tourism */
            .tourism-attraction {
                fill: #f2caea;
                stroke: #f124cb;
                stroke-width: 0px;
            }

            /* Building */
            .building-block {
                fill: #F3D6B6;
                stroke: #6a5a8e;
                stroke-width: 0.2px;
            }

            /* Map decoration */
            .map-grid-line {
                fill: none;
                stroke: #8080ff;
                stroke-width: 0.1px;
                stroke-opacity: 0.5;
            }

            .map-border-casing {
                fill: none;
                stroke: #8080ff;
                stroke-width: 3px;
                stroke-miterlimit: 4;
                stroke-dasharray: none;
                stroke-opacity: 1;
                stroke-linecap: round;
            }

            .map-border-core {
                fill: none;
                fill-opacity: 1;
                fill-rule: nonzero;
                stroke: #ffffff;
                stroke-width: 2px;
                stroke-miterlimit: 0;
                stroke-dashoffset: -0.5px;
                stroke-opacity: 1;
            }

            .map-scale-casing {
                fill: none;
                stroke: #8080ff;
                stroke-width: 4px;
                stroke-linecap: butt;
            }

            .map-scale-core {
                fill: none;
                stroke: #ffffff;
                stroke-width: 3px;
                stroke-linecap: butt;
            }

            .map-scale-bookend {
                fill: none;
                stroke: #8080ff;
                stroke-width: 1px;
                stroke-linecap: butt;
            }

            .map-scale-caption {
                font-family: "DejaVu Sans",sans-serif;
                font-size: 10px;
                fill: #8080ff;
            }

            <!-- map background must be the same for all zooms or else empty tile detection will fail -->
            .map-background {
                fill: #f8f8f8;
                stroke: none;
            }

            .map-title {
                font-family: "DejaVu Sans",sans-serif;
                font-size: 20px;
                text-anchor: middle;
                fill: black;
            }

            .map-title-background {
                fill: white;
            }

            .map-marginalia-background {
                fill: white;
            }
        </style>

        <svg:symbol
          id="airport"
          viewBox="0 0 10 10"
          fill="black"
          fill-opacity="1"
          fill-rule="evenodd"
          stroke="none">
            <svg:path d="M 9.2,5 C 9.2,4.5 9.8,3.2 10,3 L 9,3 L 8,4 L 5.5,4 L 8,0 L 6,0 L 3,4 C 2,4 1,4.2 0.5,4.5 C 0,5 0,5 0.5,5.5 C 1,5.8 2,6 3,6 L 6,10 L 8,10 L 5.5,6 L 7.8,6 L 9,7 L 10,7 C 9.8,6.8 9.2,5.5 9.2,5 z " />
        </svg:symbol>

    </defs>
</rules>

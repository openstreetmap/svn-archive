<?xml version='1.0' encoding='iso-8859-1' ?>
<maplint:test group="segments" id="tagged-segment" version="1" severity="error"
    xmlns:maplint="http://maplint.openstreetmap.org/xml/1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <maplint:desc xml:lang="en">
        Segment with any tag (except "created_by"). Tagging segments is
        deprecated. Please create ways and tag them instead.
    </maplint:desc>

    <maplint:check data="segment" type="application/xsl+xml">
        <xsl:for-each select="tag">
            <xsl:choose>
                <xsl:when test="starts-with(@k, 'tiger:')">
                </xsl:when>
                <xsl:when test="starts-with(@k, 'AND_')">
                </xsl:when>
                <xsl:when test="starts-with(@k, 'AND:')">
                </xsl:when>
                <xsl:when test="starts-with(@k, 'gns:')">
                </xsl:when>
                <xsl:when test="@k='created_by'">
                </xsl:when>
                <xsl:when test="@k='converted_by'">
                </xsl:when>
                <xsl:otherwise>
                    <maplint:result>
                        <xsl:for-each select="tag[(@k!='created_by') and (@k!='converted_by')]">
                            <xsl:value-of select="concat(@k,'=',@v,' ')"/>
                        </xsl:for-each>
                    </maplint:result>
                </xsl:otherwise>
            </xsl_choose>
        </xsl:for-each>
    </maplint:check>

</maplint:test>

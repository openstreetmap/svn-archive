<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title><osmolt type="title"></title>
    <link type="text/css" rel="stylesheet" href="map.css" />
    <script src="OpenLayers-2.7/OpenLayers.js"></script>
    <script src="http://openstreetmap.org/openlayers/OpenStreetMap.js"></script>    
    <style type="text/css">
      #map {
              width: 100%;
              height: 100%;
              border: 0px;
              padding: 0px;
              position: absolute;
           }
      body {
              border: 0px;
              margin: 0px;
              padding: 0px;
              height: 100%;
           }
    </style>


    <script type="text/javascript">
        <!--
        var map;

        function init(){

            var theArgs = getArgs();
            var lon = theArgs.lon ? theArgs.lon : <osmolt type="lon">;
            var lat = theArgs.lat ? theArgs.lat : <osmolt type="lat">;
            var zoom = theArgs.zoom ? theArgs.zoom : <osmolt type="zoom">;

            map = new OpenLayers.Map('map',
                    { maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
                      numZoomLevels: 20,
                      maxResolution: 156543.0399,
                      units: 'm',
                      projection: new OpenLayers.Projection("EPSG:900913"),
                      displayProjection: new OpenLayers.Projection("EPSG:4326"),
		      controls:[
			new OpenLayers.Control.Permalink(),
			new OpenLayers.Control.MouseDefaults(),
			new OpenLayers.Control.LayerSwitcher(),
			new OpenLayers.Control.MousePosition(),
			new OpenLayers.Control.PanZoomBar()
		      ]
                    });

            var layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");

            var layerTah = new OpenLayers.Layer.OSM.Osmarender("Osmarender");

            map.addLayers([layerMapnik,layerTah]);
            
            <osmolt type="layers">

            map.addControl(new OpenLayers.Control.LayerSwitcher());

            map.setCenter(new OpenLayers.LonLat(lon,lat).transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913")), zoom);
        }



        function getArgs() {
            var args = new Object();
            var query = location.search.substring(1);  // Get query string.
            var pairs = query.split("&");              // Break at ampersand. //+pjl
       
            for(var i = 0; i < pairs.length; i++) {
                var pos = pairs[i].indexOf('=');       // Look for "name=value".
                if (pos == -1) continue;               // If not found, skip.
                var argname = pairs[i].substring(0,pos);  // Extract the name.
                var value = pairs[i].substring(pos+1); // Extract the value.
                args[argname] = unescape(value);          // Store as a property.
            }
            return args;                               // Return the object.
        }

        // -->
    </script>




  </head>
  <body onload="init()">
    <div id="map"></div>
    <div style="position:absolute; bottom:10px;width:700px;z-index: 1001;">
<img src="mag_map-120x120.png" height="60px" title="Copyright 2007 OpenStreetMap and contributors" 
onClick="window.open('http://wiki.openstreetmap.org')" />
<img src="somerights20.png" height="30px" title="This work is licensed under the Creative Commons 
Attribution-ShareAlike 2.0 License" onClick="window.open('http://creativecommons.org/licenses/by-sa/2.0')" />
</div>

  </body>
</html>



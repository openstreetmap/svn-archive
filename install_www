#!/bin/bash
#
# This script copies the eruby, ruby, html, css and images
# to the right places on www.openstreetmap

USER=$1
ROOT=/var/www/$USER

rm -rf $ROOT/*
rm -rf ../bin

# eruby
mkdir $ROOT/eruby
cp ruby/editing-interface/*.rhtml $ROOT/eruby/

# includes for eruby
mkdir $ROOT/eruby/include
cp ruby/editing-interface/include/*.rhtml $ROOT/eruby/include/

# html

cp html/index.html $ROOT

# css

mkdir $ROOT/css
cp html/css/style.css $ROOT/css/

# javascript

mkdir $ROOT/javascript

cp javascript/* $ROOT/javascript/

# images FIXME


# applet
cd java
ant

cp dist/OSMApplet.jar $ROOT/
cp lib/commons-codec-1.3.jar $ROOT/
cp dist/commons-httpclient-3.0-rc3.jar $ROOT/
cp dist/commons-logging.jar $ROOT/
cp dist/MinML2.jar $ROOT/
cp dist/core.jar $ROOT/

cd ..

# REST

mkdir -p $ROOT/ruby/api/0.2
mkdir -p $ROOT/ruby/api/osm
mkdir -p $ROOT/ruby/api/apache

cp ruby/api/*.rb $ROOT/ruby/api/0.2/
cp ruby/api/osm/*.rb $ROOT/ruby/api/osm/

# Apache simple-auth for REST
cp ruby/api/apache/simple-auth.rb $ROOT/ruby/api/apache/

# GPX RSS maker

mkdir -p ../bin

cp ruby/rss/gpx_files.rb ../bin/

# GPX parser

cp ruby/editing-interface/support/insert_gpx_files.rb ../bin/


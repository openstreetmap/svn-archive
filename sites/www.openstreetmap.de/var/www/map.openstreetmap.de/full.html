<html>
<head>
<title>OpenStreetMap f&uuml;r Deutschland - Testversion </title>
<script type="text/javascript">
	var lon = 8.5;
	var lat = 50;
	var zoom = 6;
	var PI = 3.14159265358979323846;

	lon = lon * 20037508.34 / 180;
	lat = Math.log (Math.tan ((90 + lat) * PI / 360)) / (PI / 180);
	lat = lat * 20037508.34 / 180;
</script>
<script type="text/javascript" src="javascript/OpenLayers.js"></script>
<script type="text/javascript" src="javascript/site.js"></script>

<link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<script type="text/javascript">
<!--
	var map, layer;

	function init() {
		OpenLayers.Util.onImageLoadError = function () {
			this.src = "javascript/img/404.png";
		};
		map = new OpenLayers.Map ("map", {
			maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
			minZoomLevel: 5, maxZoomLevel: 15, 
			maxResolution:156543, units:'meters', 
			projection: "EPSG:41001"} );
		/* layer = new OpenLayers.Layer.LikeGoogle ("OSM", "http://tile.osm.kn.op.dlr.de/", {type:'png'}); */
		layer = new OpenLayers.Layer.LikeGoogle ("OSM", "http://tile.openstreetmap.org/", {type:'png'});
		map.addLayer (layer);
		<!-- map.addControl (new OpenLayers.Control.LayerSwitcher()); -->
		map.setCenter (new OpenLayers.LonLat(lon, lat), zoom);
		map.events.register("moveend", map, function() { 
		           var lonlat = map.getCenter();
			   var lon_deg = (lonlat.lon / 20037508.34) * 180;
			   var lat_deg = (lonlat.lat / 20037508.34) * 180;
			   var PI = 3.14159265358979323846;
			   lat_deg = 180/PI * (2 * Math.atan(Math.exp(lat_deg * PI / 180)) - PI / 2);
			   var zoom = map.getZoom(); // + 3;
			   updatelinks(lon_deg,lat_deg,zoom);
			   });

	}
//-->
</script>
<body onload="init();">
<div style="width:99%; height:99%; position:absolute; top:0px; ;z-index: 20" >
	<div style="width:100%; height:100%; position:absolute; top:0px; border: 1px solid black;z-index: 200" id="map">
	</div>

	<div style="position:absolute; bottom:3px; right:5px ;z-index: 201">
		<A href="http://www.openstreetmap.de">
			<font size="-3">
			<nobr>OpenStreetMap</nobr>
			</font>
			<img src="images/mag_map-120x120.png" width="32" height="32"/>
		</a>
		<a href="http://creativecommons.org/licenses/by-sa/2.0/"><img src="images/somerights20.png" border="0"></a>
	</div>
</div>

<script type="text/javascript">
	if ((lat != undefined) && (lon != undefined) && (zoom != undefined)) {
		updatelinks(lon,lat,zoom);
	}
</script>

</body>
</html>

